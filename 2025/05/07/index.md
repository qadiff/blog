---
title: 'GitlessSync'
description: 'Gitファイルを除外した効率的なコピー'
publishdate: '2025-05-07T11:29:33+09:00'
unpublishdate: '2030-05-07T11:29:33+09:00'
author: 'Kaieda'
category: 'tips'
tags: ['tech']
CoverImg: ''
---

#  Gitファイルを除外した効率的なコピー

## はじめに

開発プロジェクトをコピーする際に、.gitディレクトリや.gitignoreに記載されたファイルが混入してしまい、不要なディスク容量を消費したり、コピー時間がかかりすぎたりした経験はありませんか？特にクライアントへの納品時には、これらのファイルを除外してクリーンなコピーを作成したいものです。
今回は、そんな問題を解決する「GitlessSync」というシンプルで効率的なテクニックをご紹介します。

## 問題点

Linuxの標準的なcpコマンド( `cp -r` )は、ディレクトリをコピーする際にすべてのファイルをコピーします。これには以下のような問題があります：

.gitディレクトリ（サイズが大きい場合が多い）がコピーされる
.gitignoreに記載された不要なファイル（ビルド成果物、依存関係、ログなど）がコピーされる
大きなプロジェクトでは、無駄なストレージを消費し、転送時間も長くなる

## 解決策

この問題を解決するため、rsyncコマンドを使用したシンプルなエイリアス「GitlessSync」を作成しました。このエイリアスを使えば、.gitディレクトリと.gitignoreに記載されたファイルを自動的に除外してコピーできます。

### インストール方法

```sh
echo 'alias GitlessSync='\''function _gitless_sync() { if [ -f "$1/.gitignore" ]; then rsync -a --exclude=".git" --exclude-from="$1/.gitignore" "$1/" "$2"; else rsync -a --exclude=".git" "$1/" "$2"; fi; }; _gitless_sync'\''' >> ~/.bashrc
source ~/.bashrc
```

### 使い方

使い方は非常にシンプルです

```sh
GitlessSync /コピー元ディレクトリ /コピー先ディレクトリ
```

これだけで、.gitディレクトリと.gitignoreに記載されたファイル（例：node_modules、*.log、distなど）を除外したクリーンなコピーが作成されます。

### メリット

GitlessSyncを使用する主なメリットは次のとおりです：

- 効率的なコピー: 不要なファイルを除外するので、コピー時間が短縮され、ディスク容量が節約されます
- クリーンなプロジェクト: 本番環境やクライアントに提供するコードがシンプルになります
- 簡単な使用方法: 標準のcpコマンドと同じように使えるシンプルなインターフェース
- GitIgnoreとの連携: プロジェクトですでに定義している除外ルールを再利用できます

### 私の使い方

`wsl` では、Windows 上のフォルダをマウントしていますが、そのまま実行すると遅くなります。  
そこで、必要なファイルだけ `wsl` 上のフォルダにコピーして実行できるようにします。このようにすることで、実行速度があがります。

## まとめ

「GitlessSync」は、Gitリポジトリをクリーンにコピーするためのシンプルでありながら強力なテクニックです。開発者として日々の作業を効率化するためのツールキットに加えることをお勧めします。
一度設定すれば、プロジェクトのクリーンなコピーが必要になるたびに簡単に使用でき、時間と容量を節約できます。ぜひ試してみてください！

---

この記事が役立ちましたら、コメントやシェアをお願いします。
